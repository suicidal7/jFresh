<style>
.NavCrumbs>.NavCrumbs-item {
	background-color: #2489CC;
	color: #FFFFFF;
	text-decoration: none;
	margin-left: 1px;
	border-left: medium none;
	box-sizing: border-box;
	background: none repeat scroll 0% 0% #3498DB;
	color: #FFF;
	border-width: 1px;
	border-style: solid;
	border-color: #3498DB #3498DB #268FD5;
	-moz-border-top-colors: none;
	-moz-border-right-colors: none;
	-moz-border-bottom-colors: none;
	-moz-border-left-colors: none;
	border-image: none;
	outline: 0px none;
	cursor: pointer;
	padding: 0px;
	white-space: nowrap;
	padding: 5px 20px;
	line-height: 33px;
	height: 33px;
}

.NavCrumbs>.NavCrumbs-item:active {
	background-color: #2489CC;
	box-shadow: 0px 3px 5px rgba(0, 0, 0, 0.125) inset;
}
.NavCrumbs>.NavCrumbs-item:hover {
	background-color: #268FD5;
}
.NavCrumbs>.NavCrumbs-item:focus {
	background-color: #219552;
}

</style>

<template id="jFresh.NavCrumbs.item">
	<a href="#"></a>
</template>

<script type="text/javascript">
jFresh.fn.NavCrumbs = function(el, opts) {
	this.el = el;
	this.opts = opts;
	var me = this;
	
	this.el.addEventListener('click', function(ev) {
		var t = ev.target.parent('.NavCrumbs-item');
		if ( !t ) return;
		for(var i =0; i<me.el.children.length;i++) {
			me.el.children[i].classList.remove('selected');
		}
		t.classList.add('selected');
		me._val = t.getAttribute('data-uid');
		me.el.fireEvent('change');
	});
	
	
	this.val('/home/foobar/test/subfolders/stuff');
};

jFresh.fn.NavCrumbs.defaults = {
	itemTpl: 'jFresh.NavCrumbs.item',
	splitOn: '/',
	//~ itemIdAttr: 'data-uid', //uid attribute
	itemText: 'a', //element in tpl to set .innerHTML
};

jFresh.fn.NavCrumbs.prototype.val = function(crumb) {
	if ( !arguments.length ) return this._val;
	this._val = crumb;
	this.crumbs = crumb.split(this.opts.splitOn);
	var me = this;
	
	var chain = [];
	for(var i=0; i<me.crumbs.length; i++) {
		var c = me.crumbs[i];
		chain.push(c);
		if ( c=='' ) c='/';
		var tpl = jFresh.fn.Template.energize( this.opts.itemTpl, this.el );
		(tpl.matches(this.opts.itemText) ? tpl : tpl.querySelector(this.opts.itemText)).innerHTML = c;
		tpl.classList.add('NavCrumbs-item');
		tpl.setAttribute('data-uid', chain.join(me.opts.splitOn)||'/' );
	}
	//~ me.element.children().last().addClass('selected');


};

</script>