<style>
.DocViewer {
	flex: 1 1 auto;
	align-self: stretch;
}
</style>


<template id="XTC.DocViewer">
	<iframe --sandbox="allow-forms allow-popups allow-pointer-lock allow-same-origin allow-scripts" fn="DocViewer"></iframe>
</template>

<script type="text/javascript">

xtc.fn.DocViewer = function(el, opts) {
	var me = this;
	me.el = el;
	me.opts = opts;
	
	console.log('DocViewer created');
};

xtc.fn.DocViewer.defaults = {
	sktEl: '.SocketIO', //this.el.closest(sktEl)
};

xtc.fn.DocViewer.appInfo = {
	title: 'DocViewer',
};


xtc.fn.DocViewer.prototype = {
	start: function(args) {
console.log('STARTING DOCVIEWER', args, this.el);
		if ( args instanceof Array ) args = args.shift(); //todo: deal with opening multiple docs, either launch new windows or new tabs?!
		
		if ( !args.match(/^[^:]+\/\//) ) args = document.location.origin+'/file'+ args;
		
		this.el.src = args;
	},
};


</script>
